<div class="topbar">
	<a (click)="refresh()">
		<div class="brand">
			<img src="mdmlogo.png" alt="MDMPort logo" id="logo" />
			<section class="mdm-brand">
				<div class="mdm-logo" aria-label="mdmport kezd≈ëlap">mdm<span>port</span></div>
			</section>
		</div>
	</a>

	<div class="search">
		<input id="search" placeholder="J√°t√©kok keres√©se..." />
	</div>

	<div class="top-actions">
		<button class="hamburger" [class.active]="menuOpen" (click)="toggleMenu()">
			<span></span>
			<span></span>
			<span></span>
		</button>

		<div class="nav-links" [class.show]="menuOpen">
			<a routerLink="/community" class="btn1" (click)="closeMenu()">K√∂z√∂ss√©g</a>
			<a routerLink="/" class="btn1" (click)="closeMenu()">√Åruh√°z</a>

			<a *ngIf="!loggedUser" routerLink="/login" class="btn1" (click)="closeMenu()">Bejelentkez√©s</a>

			<div class="user-menu-container" *ngIf="loggedUser">
				<button class="btn1 user-btn" (click)="toggleUserMenu()">{{ loggedUser }}</button>

				<div class="user-menu" *ngIf="userMenuOpen">
					<a routerLink="/cart" (click)="closeUserMenu()" class="user-menu-item">Kos√°r</a>
					<a routerLink="/library" (click)="closeUserMenu()" class="user-menu-item">K√∂nyvt√°r</a>
					<a (click)="logout()" class="user-menu-item logout">Kijelentkez√©s</a>
				</div>
			</div>
		</div>
	</div>
</div>
<main class="container">
  <section class="hero" style="display:flex;justify-content:flex-start;gap:40px">
    <div style="flex:1;max-width:600px">
      <h2>Kos√°r</h2>

      <div *ngIf="cartItems.length > 0; else emptyCart">
        <div
          *ngFor="let item of cartItems"
          style="display:flex;align-items:flex-start;gap:16px;margin-bottom:20px;border-bottom:1px solid #2a2a2a;padding-bottom:12px"
        >
        <div>
          <img
            id="m-cover"
            [src]="item.image"
            alt="{{ item.name }}"
            style="width:200px;max-width:100%;border-radius:6px;object-fit:cover;display:block;margin-bottom:8px"
          />
        </div>

          <div style="flex:1">
            <h3 style="margin:0 0 6px 0">{{ item.name }}</h3>
            <p *ngIf="item.price > 0" style="font-weight:600;color:#bff39b">
              ${{ item.price.toFixed(2) }}
            </p>
            <p *ngIf="item.price === 0" style="color:#bff39b">Free</p>
            <button (click)="removeFromCart(item)" class="remove">Elt√°vol√≠t√°s</button>
          </div>
        </div>

        <div style="display:flex;align-items:center;gap:16px;margin-top:20px">
          <p style="margin:0;font-weight:700;color:#bff39b">
            √ñsszesen: ${{ getTotal().toFixed(2) }}
          </p>
          <button
            (click)="purchase()"
            style="
              background-color:#4caf50;
              color:#fff;
              font-weight:600;
              border:none;
              border-radius:6px;
              padding:8px 16px;
              cursor:pointer;
              transition:background-color 0.2s;
            "
            onmouseover="this.style.backgroundColor='#43a047'"
            onmouseout="this.style.backgroundColor='#4caf50'"
          >
            V√°s√°rl√°s
          </button>
        </div>
      </div>

      <ng-template #emptyCart>
        <p>A kosarad √ºres.</p>
      </ng-template>
    </div>
  </section>
</main>


<div id="lightbox">
	<button id="lb-prev">‚ü®</button>
	<img id="lightbox-img" src="" alt="big shot" />
	<button id="lb-next">‚ü©</button>
</div>

<footer class="mdm-footer" role="contentinfo" aria-label="Oldal l√°bl√©c">
	<div class="mdm-wrap">
		<section class="mdm-brand">
			<a routerLink="" class="mdm-logo" aria-label="mdmport kezd≈ëlap">mdm<span>port</span></a>
			<p class="mdm-tag">Fedezd fel. Gy≈±jts. J√°tssz. ‚Äì egy helyen a kedvenceid, h√≠rek √©s aj√°nlatok.</p>
			<div class="mdm-badges" aria-label="Min≈ës√©gi jelv√©nyek">
				<span class="badge">üéÆ 1 200+ j√°t√©k</span>
				<span class="badge">‚ö° Gyors let√∂lt√©s</span>
				<span class="badge">üõ°Ô∏è Biztons√°gos</span>
			</div>
		</section>

		<nav class="mdm-columns" aria-label="L√°bl√©c navig√°ci√≥">
			<div class="col">
				<h3>Felfedez√©s</h3>
				<ul>
					<li><a routerLink="/">Top list√°k</a></li>
					<li><a routerLink="/">Ingyenes j√°t√©kok</a></li>
					<li><a routerLink="/">Akci√≥k</a></li>
					<li><a routerLink="/">Aj√°nlott</a></li>
				</ul>
			</div>
			<div class="col">
				<h3>K√∂z√∂ss√©g</h3>
				<ul>
					<li><a href="#">H√≠rek & cikkek</a></li>
					<li><a href="#">Esem√©nyek</a></li>
					<li><a href="#">T√°mogat√°s</a></li>
				</ul>
			</div>
			<div class="col">
				<h3>Fi√≥k</h3>
				<ul>
					<li><a href="#">Bejelentkez√©s</a></li>
					<li><a href="#">Regisztr√°ci√≥</a></li>
					<li><a href="#">V√°s√°rl√°saim</a></li>
					<li><a href="#">Be√°ll√≠t√°sok</a></li>
				</ul>
			</div>
			<div class="col">
				<h3>Jog & info</h3>
			</div>
		</nav>
	</div>
</footer>
