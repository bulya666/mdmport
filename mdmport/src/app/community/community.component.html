<div class="topbar">
	<a routerLink="">
		<div class="brand">
			<img src="mdmlogo.png" alt="MDMPort logo" id="logo" />
			<section class="mdm-brand">
				<div class="mdm-logo" aria-label="mdmport kezd≈ëlap">mdm<span>port</span></div>
			</section>
		</div>
	</a>

	<div class="search">
		<input id="search" placeholder="J√°t√©kok keres√©se..." />
	</div>

	<div class="top-actions">
		<button class="hamburger" [class.active]="menuOpen" (click)="toggleMenu()">
			<span></span>
			<span></span>
			<span></span>
		</button>

		<div class="nav-links" [class.show]="menuOpen">
			<a routerLink="/community" class="btn1" (click)="closeMenu()">K√∂z√∂ss√©g</a>
			<a routerLink="/" class="btn1" (click)="goToShop()">√Åruh√°z</a>

			<a *ngIf="!loggedUser" routerLink="/login" class="btn1" (click)="closeMenu()">Bejelentkez√©s</a>

			<div class="user-menu-container" *ngIf="loggedUser">
				<button class="btn1 user-btn" (click)="toggleUserMenu()">{{ loggedUser }}</button>

				<div class="user-menu" *ngIf="userMenuOpen">
					<a routerLink="/cart" (click)="closeUserMenu()" class="user-menu-item">Kos√°r</a>
					<a routerLink="/library" (click)="closeUserMenu()" class="user-menu-item">K√∂nyvt√°r</a>
					<a (click)="logout()" class="user-menu-item logout">Kijelentkez√©s</a>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="community-page">
	<h1>K√∂z√∂ss√©g</h1>

	<mat-card class="new-post">
		<mat-card-title>√öj bejegyz√©s</mat-card-title>
		<mat-card-content>
			<mat-form-field appearance="outline" class="w-full">
				<textarea matInput placeholder="Oszd meg gondolataid..." [(ngModel)]="newPostContent"></textarea>
			</mat-form-field>
		</mat-card-content>
		<mat-card-actions>
			<button mat-raised-button color="primary" (click)="addPost()">K√∂zz√©t√©tel</button>
		</mat-card-actions>
	</mat-card>

	<mat-tab-group>
		<mat-tab label="Bejegyz√©sek">
			<div class="posts">
				<mat-card *ngFor="let post of posts" class="post-card">
					<mat-card-header>
						<div mat-card-avatar class="user-avatar"></div>
						<mat-card-title>{{ post.author }}</mat-card-title>
						<mat-card-subtitle>{{ post.date | date:'medium' }}</mat-card-subtitle>
					</mat-card-header>

					<mat-card-content>
						<p>{{ post.content }}</p>
					</mat-card-content>

					<mat-card-actions>
						<button mat-button color="primary" (click)="likePost(post)"><mat-icon>thumb_up</mat-icon> {{ post.likes }}</button>
						<button mat-button (click)="toggleComments(post)">
							<mat-icon>comment</mat-icon>
							{{ post.showComments ? 'Hozz√°sz√≥l√°sok elrejt√©se' : 'Hozz√°sz√≥l√°sok megtekint√©se' }} ({{ post.comments.length }})
						</button>
					</mat-card-actions>

					<div *ngIf="post.showComments" class="comments">
						<mat-list>
							<mat-list-item *ngFor="let c of post.comments">
								<mat-icon matListIcon>person</mat-icon>
								<div matLine><b>{{ c.author }}</b></div>
								<div matLine>{{ c.text }}</div>
							</mat-list-item>
						</mat-list>

						<div class="add-comment">
							<input matInput #commentInput placeholder="√çrj hozz√°sz√≥l√°st..." />
							<button mat-icon-button color="primary" (click)="addComment(post, commentInput)">
								<mat-icon>send</mat-icon>
							</button>
						</div>
					</div>
				</mat-card>
			</div>
		</mat-tab>
	</mat-tab-group>
</div>

<footer class="mdm-footer" role="contentinfo" aria-label="Oldal l√°bl√©c">
	<div class="mdm-wrap">
		<section class="mdm-brand">
			<a routerLink="" class="mdm-logo" aria-label="mdmport kezd≈ëlap">mdm<span>port</span></a>
			<p class="mdm-tag">Fedezd fel. Gy≈±jts. J√°tssz. ‚Äì egy helyen a kedvenceid, h√≠rek √©s aj√°nlatok.</p>
			<div class="mdm-badges" aria-label="Min≈ës√©gi jelv√©nyek">
				<span class="badge">üéÆ 1 200+ j√°t√©k</span>
				<span class="badge">‚ö° Gyors let√∂lt√©s</span>
				<span class="badge">üõ°Ô∏è Biztons√°gos</span>
			</div>
		</section>

		<nav class="mdm-columns" aria-label="L√°bl√©c navig√°ci√≥">
			<div class="col">
				<h3>Felfedez√©s</h3>
				<ul>
					<li><a href="#">Top list√°k</a></li>
					<li><a href="#">Ingyenes j√°t√©kok</a></li>
					<li><a href="#">Akci√≥k</a></li>
					<li><a href="#">Aj√°nlott</a></li>
				</ul>
			</div>
			<div class="col">
				<h3>K√∂z√∂ss√©g</h3>
				<ul>
					<li><a href="#">H√≠rek & cikkek</a></li>
					<li><a href="#">Esem√©nyek</a></li>
					<li><a href="#">T√°mogat√°s</a></li>
				</ul>
			</div>
			<div class="col">
				<h3>Fi√≥k</h3>
				<ul>
					<li><a href="#">Bejelentkez√©s</a></li>
					<li><a href="#">Regisztr√°ci√≥</a></li>
					<li><a href="#">V√°s√°rl√°saim</a></li>
					<li><a href="#">Be√°ll√≠t√°sok</a></li>
				</ul>
			</div>
			<div class="col">
				<h3>Jog & info</h3>
			</div>
		</nav>
	</div>
</footer>
