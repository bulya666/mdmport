<div class="community-container">
  <!-- Fejl√©c -->
  <header class="community-header">
    <h1>K√∂z√∂ss√©gi Port√°l</h1>
    <p>Maradj naprak√©sz a leg√∫jabb h√≠rekkel, friss√≠t√©sekkel √©s k√∂z√∂ss√©gi esem√©nyekkel</p>
  </header>

  <div class="community-content">
    <!-- Bal oldal: Cikkek -->
    <main class="articles-section">
      <!-- Sz≈±r≈ëk -->
      <div class="filters">
        <!-- Keres√©s mez≈ë -->
        <div class="search-box">
          <input 
            type="text" 
            [(ngModel)]="searchTerm" 
            (input)="filterArticles()"
            placeholder="Keres√©s cikkek k√∂z√∂tt..."
            class="search-input"
          >
          <span class="search-icon">üîç</span>
        </div>
        
        <!-- Kateg√≥ria sz≈±r≈ëk gombjai -->
        <div class="category-filters">
          <button 
            *ngFor="let category of categories"
            [class.active]="selectedCategory === category.id"
            (click)="selectedCategory = category.id; filterArticles()"
            class="category-btn"
          >
            {{ category.name }}
          </button>
        </div>
      </div>

      <!-- Cikkek list√°ja -->
      <div class="articles-list">
        <div *ngFor="let article of pagedArticles" class="article-card">
          <!-- Cikk fejl√©c -->
          <div class="article-header">
            <!-- Kateg√≥ria c√≠mke -->
            <span 
              class="article-category"
              [style.backgroundColor]="getCategoryColor(article.category)"
            >
              {{ getCategoryName(article.category) }}
            </span>
            <!-- D√°tum -->
            <span class="article-date">{{ article.date }}</span>
          </div>

            <!-- M√≥d√°lis ablak a cikk megnyit√°s√°hoz -->
            <div *ngIf="showModal" class="modal-overlay">
              <div class="modal-content">
                <button class="close-btn" (click)="closeModal()">Z√°r</button>
                <div class="modal-body">
                  <!-- Bal oldal: cikk -->
                  <div class="modal-left">
                    <h3>{{ getArticleTitle(selectedArticleId!) }}</h3>
                    <p>{{ (articles.find(a => a.id === selectedArticleId!))?.content }}</p>
                  </div>
                  <!-- Jobb oldal: kommentek -->
                  <div class="modal-right">
                    <h4>Hozz√°sz√≥l√°sok</h4>
                    <div class="comments-list-modal">
                      <div *ngFor="let comment of getCommentsForSelectedArticle()" class="comment-card">
                        <div class="comment-header">
                          <span class="comment-author">{{ comment.author }}</span>
                          <span class="comment-date">{{ comment.date }}</span>
                        </div>
                        <div class="comment-content">{{ comment.content }}</div>
                        <div class="comment-footer">
                          <button class="like-btn" (click)="likeComment(comment)">
                            üëç {{ comment.likes }}
                          </button>
                        </div>
                      </div>
                    </div>
                    <!-- √öj komment √≠r√°sa modalban -->
                    <div class="new-comment-form">
                      <h4>√öj hozz√°sz√≥l√°s</h4>
                      <div class="form-group">
                        <input type="text" [(ngModel)]="modalCommentAuthor" placeholder="Neved" class="form-input" />
                      </div>
                      <div class="form-group">
                        <textarea [(ngModel)]="modalCommentContent" rows="3" placeholder="Hozz√°sz√≥l√°s" class="form-textarea"></textarea>
                      </div>
                      <button (click)="addModalComment()" class="submit-btn">Hozz√°sz√≥l√°s k√ºld√©se</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          <!-- Cikk c√≠me √©s tartalma -->
          <h3 class="article-title">{{ article.title }}</h3>
          <p class="article-content">{{ article.content }}</p>
          
          <!-- Cikk l√°bl√©c -->
          <div class="article-footer">
            <!-- Szerz≈ë √©s statisztika -->
            <div class="article-meta">
              <span class="article-author">√çrta: {{ article.author }}</span>
              <div class="article-stats">
                <!-- Like gomb -->
                <button class="like-btn" (click)="likeArticle(article)">
                  üëç {{ article.likes }}
                </button>
                <!-- Hozz√°sz√≥l√°sok sz√°ma -->
                <span class="comments-count">
                  üí¨ {{ article.commentsCount }} hozz√°sz√≥l√°s
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- √úres eredm√©ny eset√©n -->
        <div *ngIf="pagedArticles.length === 0" class="no-results">
          <p>Nincs tal√°lat a keres√©si felt√©telek alapj√°n.</p>
        </div>
      </div>

      <!-- Lapoz√≥ (Paginator) -->
      <div *ngIf="filteredArticles.length > itemsPerPage" class="pagination-container">
        <div class="pagination">
          <!-- El≈ëz≈ë oldal -->
          <button 
            class="page-btn prev-btn" 
            [disabled]="currentPage === 1"
            (click)="prevPage()"
          >
            &laquo; El≈ëz≈ë
          </button>
          
          <!-- Oldalsz√°mok -->
          <div class="page-numbers">
            <button 
              *ngFor="let page of pages"
              class="page-number"
              [class.active]="page === currentPage"
              (click)="goToPage(page)"
            >
              {{ page }}
            </button>
          </div>
          
          <!-- K√∂vetkez≈ë oldal -->
          <button 
            class="page-btn next-btn" 
            [disabled]="currentPage === totalPages"
            (click)="nextPage()"
          >
            K√∂vetkez≈ë &raquo;
          </button>
        </div>
        
        <!-- Oldal inform√°ci√≥ -->
        <div class="pagination-info">
          <span>
            {{ getMin(currentPage * itemsPerPage, filteredArticles.length) }} - 
            {{ getMax((currentPage - 1) * itemsPerPage + 1, 1) }} / 
            {{ filteredArticles.length }} cikk
          </span>
          <span class="page-indicator">
            Oldal: {{ currentPage }} / {{ totalPages }}
          </span>
        </div>
      </div>
    </main>

    <!-- Jobb oldal: Komment szekci√≥ -->
    <aside class="comments-section">
      <!-- Komment szekci√≥ fejl√©c -->
      <div class="comments-header">
        <h2>üí¨ Hozz√°sz√≥l√°sok</h2>
        <p>Vedd r√©szt a besz√©lget√©sben!</p>
      </div>

      <!-- √öj hozz√°sz√≥l√°s ≈±rlap -->
      <div class="new-comment-form">
        <h3>√öj hozz√°sz√≥l√°s √≠r√°sa</h3>
        <!-- N√©v megad√°sa -->
        <div class="form-group">
          <input 
            type="text" 
            [(ngModel)]="newComment.author"
            placeholder="Neved"
            class="form-input"
          >
        </div>
        <!-- Hozz√°sz√≥l√°s sz√∂veg -->
        <div class="form-group">
          <textarea 
            [(ngModel)]="newComment.content"
            placeholder="√çrd meg hozz√°sz√≥l√°sodat..."
            rows="4"
            class="form-textarea"
          ></textarea>
        </div>
        <!-- K√ºld√©s gomb -->
        <button (click)="addComment()" class="submit-btn">
          Hozz√°sz√≥l√°s k√ºld√©se
        </button>
      </div>

      <!-- Kommentek list√°ja -->
      <div class="comments-list">
        <h3>Kommentek</h3>
        
        <div *ngFor="let comment of comments" class="comment-card">
          <!-- Kommentel≈ë √©s d√°tum -->
          <div class="comment-header">
            <span class="comment-author">{{ comment.author }}</span>
            <span class="comment-date">{{ comment.date }}</span>
          </div>
          <!-- Komment sz√∂vege -->
          <div class="comment-content">{{ comment.content }}</div>
          
          <!-- Kedvel√©s gomb -->
          <div class="comment-footer">
            <button class="like-btn" (click)="likeComment(comment)">
              üëç {{ comment.likes }}
            </button>
          </div>
        </div>
        
        <!-- Nincsenek kommentek -->
        <div *ngIf="comments.length === 0" class="no-comments">
          Nincsenek kommentek m√©g.
        </div>
      </div>

      <!-- L√°bl√©c -->
      <footer class="community-footer">
        <p>¬© 2026 MDMPort | Minden jog fenntartva</p>
      </footer>
    </aside>
  </div>
</div>