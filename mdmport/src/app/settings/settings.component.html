<div class="settings-container">
  <header class="settings-header">
    <h1>Fi√≥k be√°ll√≠t√°sok</h1>
    <p class="lead">Kezeld a profil, √©rtes√≠t√©sek √©s adatv√©delmi be√°ll√≠t√°saidat.</p>
  </header>

  <!-- Notification -->
  <div class="notification" *ngIf="message.visible" [ngClass]="['notification--' + message.type]" role="alert">
    <span class="notification-icon">{{ message.type === 'success' ? '‚úì' : '‚úï' }}</span>
    <span class="notification-text">{{ message.text }}</span>
  </div>

  <div class="settings-content">
    <!-- Sidebar -->
    <aside class="settings-sidebar">
      <nav class="tab-nav" role="tablist">
        <button 
          *ngFor="let tab of tabs"
          [attr.aria-selected]="activeTab === tab"
          role="tab"
          class="tab-button"
          [class.active]="activeTab === tab"
          (click)="selectTab(tab)">
          <span class="tab-label">{{ tabLabels[tab] }}</span>
        </button>
      </nav>
    </aside>

    <!-- Main -->
    <main class="settings-main" role="tabpanel">
      
      <!-- Profile tab -->
      <section *ngIf="activeTab === 'profile'" class="settings-panel">
        <h2>Profil m√≥dos√≠t√°sa</h2>
        
        <form class="settings-form" (ngSubmit)="saveProfileChanges()">
          <div class="form-group">
            <label for="username">Felhaszn√°l√≥n√©v</label>
            <input 
              id="username"
              type="text" 
              [(ngModel)]="userSettings.username" 
              name="username"
              class="form-input"
              required>
          </div>

          <div class="form-group">
            <label for="email">Email c√≠m</label>
            <input 
              id="email"
              type="email" 
              [(ngModel)]="userSettings.email" 
              name="email"
              class="form-input"
              required>
          </div>

          <hr class="divider">

          <h3>Jelsz√≥ m√≥dos√≠t√°sa (opcion√°lis)</h3>

          <div class="form-group">
            <label for="currentPassword">Jelenlegi jelsz√≥</label>
            <div class="password-input-wrapper">
              <input 
                id="currentPassword"
                [type]="passwordVisible ? 'text' : 'password'" 
                [(ngModel)]="userSettings.currentPassword" 
                name="currentPassword"
                class="form-input">
              <button 
                type="button" 
                class="password-toggle"
                (click)="togglePasswordVisibility('password')"
                [attr.aria-label]="passwordVisible ? 'Jelsz√≥ elrejt√©se' : 'Jelsz√≥ megjelen√≠t√©se'">
                {{ passwordVisible ? 'üëÅÔ∏è' : 'üëÅÔ∏è' }}
              </button>
            </div>
          </div>

          <div class="form-group">
            <label for="newPassword">√öj jelsz√≥</label>
            <input 
              id="newPassword"
              type="password" 
              [(ngModel)]="userSettings.newPassword" 
              name="newPassword"
              class="form-input">
          </div>

          <div class="form-group">
            <label for="confirmPassword">√öj jelsz√≥ meger≈ës√≠t√©se</label>
            <div class="password-input-wrapper">
              <input 
                id="confirmPassword"
                [type]="confirmPasswordVisible ? 'text' : 'password'" 
                [(ngModel)]="userSettings.confirmPassword" 
                name="confirmPassword"
                class="form-input">
              <button 
                type="button" 
                class="password-toggle"
                (click)="togglePasswordVisibility('confirmPassword')"
                [attr.aria-label]="confirmPasswordVisible ? 'Jelsz√≥ elrejt√©se' : 'Jelsz√≥ megjelen√≠t√©se'">
                {{ confirmPasswordVisible ? 'üëÅÔ∏è' : 'üëÅÔ∏è' }}
              </button>
            </div>
          </div>

          <button type="submit" class="btn btn-primary" [disabled]="isLoading">
            {{ isLoading ? 'Ment√©s...' : 'Profil ment√©se' }}
          </button>
        </form>
      </section>

      <!-- Preferences tab -->
      <section *ngIf="activeTab === 'preferences'" class="settings-panel">
        <h2>Be√°ll√≠t√°sok</h2>

        <form class="settings-form" (ngSubmit)="savePreferences()">
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" [(ngModel)]="preferences.emailNotifications" name="emailNotifications">
              <span class="checkbox-text">Email √©rtes√≠t√©sek</span>
              <span class="checkbox-desc">√ârtes√≠t√©seket kapj email-ben az √∫j h√≠rekben √©s friss√≠t√©sekben.</span>
            </label>
          </div>

          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" [(ngModel)]="preferences.pushNotifications" name="pushNotifications">
              <span class="checkbox-text">Push √©rtes√≠t√©sek</span>
              <span class="checkbox-desc">B√∂ng√©sz≈ë push √©rtes√≠t√©sek enged√©lyez√©se.</span>
            </label>
          </div>

          <hr class="divider">
          <h3>Profil l√°that√≥s√°ga</h3>

          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" [(ngModel)]="preferences.profilePublic" name="profilePublic">
              <span class="checkbox-text">Nyilv√°nos profil</span>
              <span class="checkbox-desc">M√°s felhaszn√°l√≥k megl√°tj√°k a profilodat.</span>
            </label>
          </div>

          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" [(ngModel)]="preferences.showActivity" name="showActivity">
              <span class="checkbox-text">Tev√©kenys√©g megjelen√≠t√©se</span>
              <span class="checkbox-desc">Megjelenik, mit j√°tszol √©s mit szerzel.</span>
            </label>
          </div>

          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" [(ngModel)]="preferences.allowMessaging" name="allowMessaging">
              <span class="checkbox-text">√úzenetek enged√©lyez√©se</span>
              <span class="checkbox-desc">M√°s felhaszn√°l√≥k √ºzenetet k√ºldhetnek neked.</span>
            </label>
          </div>

          <button type="submit" class="btn btn-primary" [disabled]="isLoading">
            {{ isLoading ? 'Ment√©s...' : 'Be√°ll√≠t√°sok ment√©se' }}
          </button>
        </form>
      </section>

      <!-- Privacy tab -->
      <section *ngIf="activeTab === 'privacy'" class="settings-panel">
        <h2>Adatv√©delmi be√°ll√≠t√°sok</h2>
        <p class="info-text">Az mdmport szigor√∫an k√∂veti az adatv√©delmi t√∂rv√©nyeket.</p>

        <div class="info-box">
          <h3>üîê Adatok let√∂lt√©se</h3>
          <p>Let√∂ltheted az √∂sszes szem√©lyes adatodat.</p>
          <button class="btn btn-secondary">Adatok let√∂lt√©se</button>
        </div>

        <div class="info-box warning">
          <h3>üóëÔ∏è Adatok t√∂rl√©se</h3>
          <p>√ñsszes szem√©lyes adatod t√∂rl≈ëdik, de a v√°s√°rl√°si el≈ëzm√©nyek 7 √©vig megmaradnak jogi okok miatt.</p>
          <button class="btn btn-danger">Adatok t√∂rl√©se</button>
        </div>
      </section>

      <!-- Danger zone -->
      <section *ngIf="activeTab === 'danger'" class="settings-panel danger-zone">
        <h2>‚ö†Ô∏è Vesz√©lyes m≈±veletek</h2>

        <div class="danger-box">
          <h3>Fi√≥k t√∂rl√©se</h3>
          <p>A fi√≥k v√©glegesen t√∂rl≈ëdik. Ez nem vonhat√≥ vissza.</p>
          <form class="danger-form" (ngSubmit)="deleteAccount(deletePassword.value)">
            <input 
              #deletePassword
              type="password" 
              placeholder="Jelsz√≥ meger≈ës√≠t√©shez"
              class="form-input"
              required>
            <button type="submit" class="btn btn-danger" [disabled]="isLoading">
              {{ isLoading ? 'T√∂rl√©s...' : 'Fi√≥k v√©glegesen t√∂rl√©se' }}
            </button>
          </form>
        </div>
      </section>

    </main>
  </div>
</div>